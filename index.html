<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body { margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #222; font-family: sans-serif; }
        .grid { display: grid; grid-template-columns: repeat(8, 1fr); gap: 4px; width: 95vw; max-width: 500px; }
        .cell { 
            aspect-ratio: 1; background: #444; border-radius: 4px; 
            display: flex; justify-content: center; align-items: center; 
            font-size: 1.5rem; transition: 0.2s; cursor: pointer;
        }
        .player { background: #007AFF; transform: scale(0.9); }
        .boss { background: #FF3B30; }
        .mob { background: #444; color: #fff; font-size: 1rem; }
        .reachable { outline: 2px solid #4CD964; }
    </style>
</head>
<body>
    <div class="grid" id="game-grid"></div>

<script>
    const grid = document.getElementById('game-grid');
    let cells = [];
    let playerPos = -1;

    function initGame() {
        // å»ºç«‹è§’è‰²æ± ï¼š1çŽ©å®¶(P), 1Boss(B), 62å°æ€ª(M)
        let pool = ['P', 'B', ...Array(62).fill('M')];
        pool.sort(() => Math.random() - 0.5); // éš¨æ©Ÿæ´—ç‰Œ

        grid.innerHTML = '';
        pool.forEach((type, i) => {
            const div = document.createElement('div');
            div.className = 'cell';
            div.dataset.index = i;
            if (type === 'P') { 
                div.classList.add('player'); div.innerHTML = 'ðŸ‘¤'; 
                playerPos = i;
            } else if (type === 'B') {
                div.classList.add('boss'); div.innerHTML = 'ðŸ‘¹';
            } else {
                div.classList.add('mob'); div.innerHTML = 'ðŸ‘¾';
            }
            div.onclick = () => handleMove(i);
            grid.appendChild(div);
            cells[i] = div;
        });
        updateReachable();
    }

    function handleMove(targetIdx) {
        if (!isAdjacent(playerPos, targetIdx)) return;

        const target = cells[targetIdx];
        if (target.classList.contains('mob')) {
            alert("é‡åˆ°å°æ€ªï¼é€²å…¥æˆ°é¬¥ï¼");
        } else if (target.classList.contains('boss')) {
            alert("ðŸš¨ é­é‡ BOSSï¼æº–å‚™æ±ºæˆ°ï¼");
        }

        // ç§»å‹•é‚è¼¯ï¼šæ¸…ç©ºèˆŠä½ï¼Œæ›´æ–°æ–°ä½
        cells[playerPos].classList.remove('player');
        cells[playerPos].innerHTML = ''; 
        
        playerPos = targetIdx;
        cells[playerPos].className = 'cell player';
        cells[playerPos].innerHTML = 'ðŸ‘¤';
        
        updateReachable();
    }

    function isAdjacent(p1, p2) {
        const x1 = p1 % 8, y1 = Math.floor(p1 / 8);
        const x2 = p2 % 8, y2 = Math.floor(p2 / 8);
        return Math.abs(x1 - x2) + Math.abs(y1 - y2) === 1;
    }

    function updateReachable() {
        cells.forEach((c, i) => {
            c.classList.toggle('reachable', isAdjacent(playerPos, i));
        });
    }

    initGame();
</script>
</body>
</html>
