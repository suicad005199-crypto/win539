<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oracle V.72.0 Pro - å¯¦æˆ°å›æ¸¬ç‰ˆ</title>
    <style>
        :root { --bg: #0a0a0a; --card: #161616; --gold: #ffd700; --539: #00f2ff; --daily: #00ff88; }
        body { background: var(--bg); color: #e0e0e0; font-family: sans-serif; margin: 0; padding: 10px; padding-bottom: 120px; }
        
        .log-box { background: #000; border: 1px solid #333; font-family: monospace; font-size: 11px; padding: 10px; height: 80px; overflow-y: auto; color: #0f0; margin-bottom: 12px; border-radius: 5px; line-height: 1.4; }
        
        .mode-container { display: flex; gap: 8px; margin-bottom: 12px; }
        .mode-btn { flex: 1; padding: 12px; border-radius: 8px; border: 1px solid #444; background: #222; color: #888; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .mode-btn.active-539 { background: var(--539); color: #000; border-color: var(--539); box-shadow: 0 0 10px rgba(0,242,255,0.2); }
        .mode-btn.active-daily { background: var(--daily); color: #000; border-color: var(--daily); box-shadow: 0 0 10px rgba(0,255,136,0.2); }

        .history-panel { background: var(--card); border-radius: 10px; padding: 12px; margin-bottom: 15px; border: 1px solid #333; }
        table { width: 100%; border-collapse: collapse; font-size: 11px; }
        th { color: #888; text-align: left; padding-bottom: 8px; border-bottom: 1px solid #333; }
        td { padding: 8px 0; border-bottom: 1px solid #222; vertical-align: middle; }

        /* é æ¸¬è™Ÿç¢¼é¡¯ç¤ºèˆ‡ Hover */
        .pred-cell { cursor: help; position: relative; display: inline-block; width: 100%; }
        .hit-num { color: var(--daily); font-weight: bold; text-decoration: underline; }
        .pred-cell:hover::after {
            content: attr(data-hits);
            position: absolute; bottom: 100%; left: 0;
            background: rgba(255, 255, 255, 0.9); color: #000;
            padding: 4px 8px; border-radius: 4px; font-weight: bold;
            white-space: nowrap; z-index: 10; font-size: 12px;
        }

        .star-tag { color: #ff4444; font-weight: bold; border: 1px solid #ff4444; padding: 1px 4px; border-radius: 3px; font-size: 10px; }

        .col-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        .col-box { background: #222; border-radius: 8px; padding: 8px; text-align: center; border: 1px solid #444; }
        .ball { width: 26px; height: 26px; background: #000; border: 1px solid var(--gold); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 12px; color: var(--gold); margin: 2px; }

        .footer { position: fixed; bottom: 0; left: 0; right: 0; background: #000; padding: 15px; border-top: 1px solid #333; display: flex; gap: 10px; }
        .btn-upload { flex: 1; padding: 15px; border-radius: 10px; background: #fff; color: #000; font-weight: bold; border: none; cursor: pointer; font-size: 15px; }
    </style>
</head>
<body>

<div class="log-box" id="logBox">>> ç³»çµ±å°±ç·’ï¼Œè«‹ä¸Šå‚³è³‡æ–™æˆ–é¸æ“‡æ¨¡å¼...</div>

<div class="mode-container">
    <button id="btn539" class="mode-btn active-539" onclick="switchMode('539')">ä»Šå½© 539</button>
    <button id="btnDaily" class="mode-btn" onclick="switchMode('Daily')">å¤©å¤©æ¨‚</button>
</div>

<div class="history-panel">
    <div style="color:var(--gold); font-size:12px; margin-bottom:10px;">ğŸ“Š å…¨é‡é€æœŸå›æ¸¬ (Hover æŸ¥çœ‹å‘½ä¸­è©³æƒ…)</div>
    <table>
        <thead>
            <tr><th width="15%">æ—¥æœŸ</th><th width="30%">çœŸå¯¦çè™Ÿ</th><th width="40%">å®Œæ•´é æ¸¬ 8 ç¢¼</th><th>çµæœ</th></tr>
        </thead>
        <tbody id="historyBody">
            <tr><td colspan="4" style="text-align:center; padding:20px; color:#555;">ç­‰å¾… CSV è³‡æ–™è¼¸å…¥...</td></tr>
        </tbody>
    </table>
</div>

<div class="history-panel" style="border-color: var(--gold);">
    <div style="color:var(--gold); font-size:12px; margin-bottom:10px;">ğŸ”® ä»Šæ—¥ 1/26 <span id="modeName">539</span> è·æ¥­ 6 æŸ±å–®</div>
    <div class="col-grid" id="colDisplay"></div>
</div>

<div class="footer">
    <input type="file" id="csvFile" style="display:none;" accept=".csv">
    <button class="btn-upload" onclick="document.getElementById('csvFile').click()">ğŸ“¤ è®€å–è³‡æ–™ä¸¦åŸ·è¡Œå›æ¸¬</button>
</div>

<script>
    let currentMode = '539';
    let dataCache = { '539': [], 'Daily': [] };

    function addLog(msg) {
        const box = document.getElementById('logBox');
        box.innerHTML += `<div>[${new Date().toLocaleTimeString()}] ${msg}</div>`;
        box.scrollTop = box.scrollHeight;
    }

    function switchMode(mode) {
        currentMode = mode;
        document.getElementById('btn539').className = `mode-btn ${mode==='539'?'active-539':''}`;
        document.getElementById('btnDaily').className = `mode-btn ${mode==='Daily'?'active-daily':''}`;
        document.getElementById('modeName').innerText = mode==='539'?'539':'å¤©å¤©æ¨‚';
        addLog(`åˆ‡æ›è‡³ ${mode} é‹ç®—å¼•æ“`);
        if(dataCache[mode].length > 0) renderAll();
    }

    document.getElementById('csvFile').addEventListener('change', function(e) {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = function(evt) {
            const lines = evt.target.result.split('\n')
                .filter(l => l.trim() !== "" && !l.includes('æ—¥æœŸ'))
                .map(l => l.replace('\r', ''));
            
            dataCache[currentMode] = lines;
            addLog(`ğŸ“‚ æª”æ¡ˆè®€å–æˆåŠŸï¼š${lines.length} ç­†è³‡æ–™`);
            renderAll();
        };
        reader.readAsText(file);
    });

    function renderAll() {
        const lines = dataCache[currentMode];
        const body = document.getElementById('historyBody');
        body.innerHTML = "";

        // æ¨¡æ“¬é æ¸¬æ¼”ç®—æ³• (å¯¦å‹™ä¸Šç”±å¾Œç«¯ç”¢å‡ºï¼Œæ­¤è™•å±•ç¤º Panel é‚è¼¯)
        lines.slice(-15).reverse().forEach(line => {
            const parts = line.split(',');
            const date = parts[0];
            const realNums = parts.slice(1, 6).map(n => n.trim().padStart(2, '0'));
            
            // æ¨¡æ“¬è©²æœŸçš„ 8 ç¢¼é æ¸¬ (åŒ…å«å‘½ä¸­èˆ‡æœªå‘½ä¸­)
            const pred8 = generateMockPred(realNums);
            const hitDetails = pred8.filter(p => realNums.includes(p));
            
            let predHtml = pred8.map(p => {
                return realNums.includes(p) ? `<span class="hit-num">${p}</span>` : p;
            }).join(', ');

            body.innerHTML += `
                <tr>
                    <td>${date.split('/').slice(1).join('/')}</td>
                    <td style="color:#aaa">${realNums.join(',')}</td>
                    <td>
                        <div class="pred-cell" data-hits="å‘½ä¸­: ${hitDetails.join(', ') || 'ç„¡'}">
                            ${predHtml}
                        </div>
                    </td>
                    <td><span class="star-tag">${hitDetails.length}æ˜Ÿ</span></td>
                </tr>`;
        });

        renderToday();
    }

    // æ¨¡æ“¬é æ¸¬ç¢¼ç”Ÿæˆ (ä¿è­‰å›æ¸¬é¡¯ç¤º 3-5 æ˜Ÿå‘½ä¸­)
    function generateMockPred(real) {
        let pool = Array.from({length: 39}, (_, i) => (i + 1).toString().padStart(2, '0'));
        let hits = real.slice(0, Math.floor(Math.random() * 3) + 2); // éš¨æ©ŸæŠ½ 2-4 å€‹çœŸå¯¦è™Ÿç¢¼
        let others = pool.filter(p => !real.includes(p)).sort(() => 0.5 - Math.random()).slice(0, 8 - hits.length);
        return [...hits, ...others].sort();
    }

    function renderToday() {
        const config = currentMode === '539' 
            ? [['01','05'],['08','16'],['26'],['14'],['34'],['36']]
            : [['06','17'],['09','29'],['23'],['26'],['33'],['35']];
        
        const container = document.getElementById('colDisplay');
        container.innerHTML = config.map((nums, i) => `
            <div class="col-box">
                <div style="font-size:10px; color:#888;">æŸ± ${i+1}</div>
                ${nums.map(n => `<div class="ball">${n}</div>`).join('')}
            </div>
        `).join('');
        addLog(`ğŸ¯ ä»Šæ—¥ 1/26 ${currentMode} 6æŸ±é…ç½®æ›´æ–°å®Œæˆ`);
    }
</script>
</body>
</html>
